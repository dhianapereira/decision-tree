var data = [
  {
    class: "no-recurrence-events",
    age: 49,
    menopause: "premeno",
    tumorSize: 20,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "left",
    breastQuad: "left_low",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "recurrence-events",
    age: 50,
    menopause: "premeno",
    tumorSize: 19,
    invNodes: 0,
    nodeCaps: "no",
    degMalig: 2,
    breast: "left",
    breastQuad: "left_low",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
  {
    class: "no-recurrence-events",
    age: 40,
    menopause: "premeno",
    tumorSize: 24,
    invNodes: 2,
    nodeCaps: "no",
    degMalig: 2,
    breast: "right",
    breastQuad: "right_up",
    irradiat: "no",
  },
];

var config = {
  trainingSet: data,
  categoryAttr: "class",
  ignoredAttributes: ['irradiat'],
};

var decisionTree = new dt.DecisionTree(config);

var numberOfTrees = 3;
var randomForest = new dt.RandomForest(config, numberOfTrees);

var patient = {
  age: 30,
  menopause: "premeno",
  tumorSize: 30,
  invNodes: 0,
  nodeCaps: "no",
  degMalig: 3,
  breast: "left",
  breastQuad: "left_low",
  irradiat: "no",
};

var decisionTreePrediction = decisionTree.predict(patient);

document.getElementById("testingItem").innerHTML =
  "Idade: " +
  patient.age +
  "<br>" +
  "Menopausa: " +
  patient.menopause +
  "<br>" +
  "Tamanho do tumor: " +
  patient.tumorSize +
  "<br>" +
  "Inv. Nó: " +
  patient.invNodes +
  "<br>" +
  "Nó: " +
  patient.degMalig +
  "<br>" +
  "Grau: " +
  patient.degMalig +
  "<br>" +
  "Mama: " +
  patient.breast +
  "<br>" +
  "Peito-quadril: " +
  patient.breastQuad +
  "<br>" +
  "Irradiar: " +
  patient.irradiat +
  "<br>";

document.getElementById("decisionTreePrediction").innerHTML = JSON.stringify(
  decisionTreePrediction,
  null,
  0
);

document.getElementById("displayTree").innerHTML = treeToHtml(
  decisionTree.root
);

function treeToHtml(tree) {
  if (tree.category) {
    return [
      "<ul>",
      "<li>",
      '<a href="#">',
      "<b>",
      tree.category,
      "</b>",
      "</a>",
      "</li>",
      "</ul>",
    ].join("");
  }

  return [
    "<ul>",
    "<li>",
    '<a href="#">',
    "<b>",
    tree.attribute,
    " ",
    tree.predicateName,
    " ",
    tree.pivot,
    " ?</b>",
    "</a>",
    "<ul>",
    "<li>",
    '<a href="#">yes</a>',
    treeToHtml(tree.match),
    "</li>",
    "<li>",
    '<a href="#">no</a>',
    treeToHtml(tree.notMatch),
    "</li>",
    "</ul>",
    "</li>",
    "</ul>",
  ].join("");
}
